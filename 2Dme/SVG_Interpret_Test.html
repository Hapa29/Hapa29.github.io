<!doctype html>
<html>
  <head>
    <title>Load an SVG</title>
    <script src="lib/two.js"></script>
    <script src="lib/jquery.js"></script>
  </head>
  <body>
    <div id="assets-id" class="assets">
    </div>
    <div id="file-selector">
      <input type="file" id="files" name="files[]" multiple />
      <output id="list"></output>
    </div>
    <div id = "two-container">
    </div>
    <div class = "scripts">
      <script>
        //Load SVG file and draw in Two.js
        $(function(){

          var two = new Two({
                  width: $(window).width() - 25,
                  height: $(window).height() - 25,
                  autostart:true
          }).appendTo(document.getElementById('two-container'));

          // Check for the various File API support.
              if (window.File && window.FileReader && window.FileList && window.Blob) {
              } else {
                alert('The File APIs are not fully supported in this browser.');
              }

            function handleFileSelect(evt) {
              two.clear();
              var files = evt.target.files; // FileList object
              for (var i = 0, f; f = files[i]; i++) {
                var reader = new FileReader();
                reader.readAsText(f);
                reader.onload = function(){
                  var selectedFile = reader.result; // gets the resulting SVG as a string
                  var theXML = StringtoXML(selectedFile); // convert the string to XML
                  var theSVG = theXML.querySelector('svg'); // retreive the SVG element from the XML
                  console.log(theSVG);
                  two.interpret(theSVG);

                    function StringtoXML(text){ //  function to convert string to XML
                        if (window.ActiveXObject){
                          var doc=new ActiveXObject('Microsoft.XMLDOM');
                          doc.async='false';
                          doc.loadXML(text);
                        } else {
                          var parser=new DOMParser();
                          var doc=parser.parseFromString(text,'text/xml');
                        }
                        return doc;
                    }

                }
              }
            }
            document.getElementById('files').addEventListener('change', handleFileSelect, false);

            two.update();     
        })
      </script>
    </div>
  </body>
</html>